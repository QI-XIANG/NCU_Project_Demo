import{initializeApp}from"https://www.gstatic.com/firebasejs/9.8.3/firebase-app.js";import{getAnalytics}from"https://www.gstatic.com/firebasejs/9.8.3/firebase-analytics.js";import{delCookie,getCookie}from"./common_function.js";const firebaseConfig={apiKey:"AIzaSyDtTxfCIJIfPTEw44Ah5I1lpjiDO96FlJM",authDomain:"mydatabase-8f225.firebaseapp.com",databaseURL:"https://mydatabase-8f225-default-rtdb.firebaseio.com",projectId:"mydatabase-8f225",storageBucket:"mydatabase-8f225.appspot.com",messagingSenderId:"68532714578",appId:"1:68532714578:web:fc038b336827906b65338b",measurementId:"G-68RXLWEXS7"};firebase.initializeApp(firebaseConfig);var db=firebase.database();const TaiwanLife=[],CathayLife=[],NanshanLife=[],ChinaLife=[],NAN=[];var users_id,user_id,data,count=1,customer_count=1;null==getCookie("CompanyName")&&(alert("請先登入再前往本頁面!"),window.location="insuranceCompany_login.html"),null!=getCookie("uid")&&delCookie("uid");var logout_btn=document.querySelector(".logout_btn");logout_btn.addEventListener("click",(a=>{delCookie("CompanyName"),document.cookie="LoginStatus=No",window.location="insuranceCompany_login.html"})),db.ref("/InsuranceCompany/"+getCookie("CompanyName")).once("value",(function(a){data=a.val(),document.querySelector(".companyName").innerHTML=data.CompanyName})),db.ref("/Users").once("value",(function(a){data=a.val(),(users_id=(users_id=Object.keys(data)).slice(0,users_id.length)).forEach((a=>{switch(String(data[a].insuranceCompany.name)){case"Nan Shan Life":user_id=String(a),data[a].user_id=user_id,NanshanLife.push(data[a]),count++;break;case"China Life":user_id=String(a),data[a].user_id=user_id,ChinaLife.push(data[a]),count++;break;case"Taiwan Life":user_id=String(a),data[a].user_id=user_id,TaiwanLife.push(data[a]),count++;break;case"Cathay Life":user_id=String(a),data[a].user_id=user_id,CathayLife.push(data[a]),count++;break;case"No insurance":user_id=String(a),data[a].user_id=user_id,NAN.push(data[a]),count++;break}}));var e,t=document.querySelector("tbody.customer-table-tbody");if("TaiwanLife"==getCookie("CompanyName")&&TaiwanLife.forEach((a=>{e='<tr>\n                            <td class="customer_number">'+Number(customer_count)+'</td>\n                            <td class="customer_name">'+a.realName+'</td>\n                            <td class="customer_gender">'+a.gender+'</td>\n                            <td class="customer_birth">'+a.birthDate+'</td>\n                            <td class="customer_detail"><a href="#" id="user_info_'+a.user_id+'" class="user_info">點擊查看</a></td>\n                        </tr>',t.innerHTML+=e,customer_count++})),"NanShanLife"==getCookie("CompanyName")&&NanshanLife.forEach((a=>{e='<tr>\n                            <td class="customer_number">'+Number(customer_count)+'</td>\n                            <td class="customer_name">'+a.realName+'</td>\n                            <td class="customer_gender">'+a.gender+'</td>\n                            <td class="customer_birth">'+a.birthDate+'</td>\n                            <td class="customer_detail"><a href="#" id="user_info_'+a.user_id+'" class="user_info">點擊查看</a></td>\n                        </tr>',t.innerHTML+=e,customer_count++})),"ChinaLife"==getCookie("CompanyName")&&ChinaLife.forEach((a=>{e='<tr>\n                            <td class="customer_number">'+Number(customer_count)+'</td>\n                            <td class="customer_name">'+a.realName+'</td>\n                            <td class="customer_gender">'+a.gender+'</td>\n                            <td class="customer_birth">'+a.birthDate+'</td>\n                            <td class="customer_detail"><a href="#" id="user_info_'+a.user_id+'" class="user_info">點擊查看</a></td>\n                        </tr>',t.innerHTML+=e,customer_count++})),"CathayLife"==getCookie("CompanyName")&&CathayLife.forEach((a=>{e='<tr>\n                            <td class="customer_number">'+Number(customer_count)+'</td>\n                            <td class="customer_name">'+a.realName+'</td>\n                            <td class="customer_gender">'+a.gender+'</td>\n                            <td class="customer_birth">'+a.birthDate+'</td>\n                            <td class="customer_detail"><a href="#" id="user_info_'+a.user_id+'" class="user_info">點擊查看</a></td>\n                        </tr>',t.innerHTML+=e,customer_count++})),"NAN"==getCookie("CompanyName")&&NAN.forEach((a=>{e='<tr>\n                            <td class="customer_number">'+Number(customer_count)+'</td>\n                            <td class="customer_name">'+a.realName+'</td>\n                            <td class="customer_gender">'+a.gender+'</td>\n                            <td class="customer_birth">'+a.birthDate+'</td>\n                            <td class="customer_detail"><a href="#" id="user_info_'+a.user_id+'" class="user_info">點擊查看</a></td>\n                        </tr>',t.innerHTML+=e,customer_count++})),Number(count-1)==Object.keys(data).length){document.querySelectorAll("a.user_info").forEach((a=>{a.addEventListener("click",(a=>{null!=getCookie("uid")&&delCookie("uid"),document.cookie="uid="+String(a.target.id).substring(10),window.location="insuranceCompany_UserProfile.html"}))})),$(".loader-wrapper").fadeOut("slow");var i,s=0,n=$("#table-demo tbody tr").length;n%5==0&&(i=Math.round(n/5)),n%5!=0&&(i=Math.ceil(n/5)),$("#table-demo").after('<div id="nav"><ul class="pagination"></ul></div>');for(var r=0;r<i;r++){var o=r+1;$("#nav .pagination").append('<li class="page-item normal-page-item"><a class="page-link normalLink link'+r+'" rel="'+r+'">'+o+"</a></li>")}$("#nav .pagination").prepend('<li class="page-item special-page-item"><a class="page-link lastPage" rel="0" aria-label="Previous"><span aria-hidden="true">&laquo;</span><span class="sr-only">Previous</span></a></li>'),$("#nav .pagination").append('<li class="page-item special-page-item"><a class="page-link nextPage" aria-label="Next"><span aria-hidden="true">&raquo;</span><span class="sr-only">Next</span></a></li>'),$("#table-demo tbody tr").hide(),$("#table-demo tbody tr").slice(0,5).show(),$("#nav a.normalLink:first").addClass("active"),Number(s)-1<=0&&$("#nav .pagination li.normal-page-item").css("opacity","0.0").hide().slice(s,s+3).show().css("opacity","1.0"),$("#nav a.normalLink").bind("click",(function(){$("#nav a").removeClass("active"),$(this).addClass("active");var a=$(this).attr("rel");s=$(this).attr("rel");var e=5*a,t=e+5;$("#table-demo tbody tr").css("opacity","0.0").hide().slice(e,t).css("display","table-row").animate({opacity:1},300),i>=3&&(Number(s)-1<=0&&$("#nav .pagination li.normal-page-item").css("opacity","0.0").hide().slice(s,s+3).show().css("opacity","1.0"),Number(s)==i-1&&$("#nav .pagination li.normal-page-item").css("opacity","0.0").hide().slice(s-2,Number(s)+1).show().css("opacity","1.0"),Number(s)-1>=0&Number(s)!=i-1&&$("#nav .pagination li.normal-page-item").css("opacity","0.0").hide().slice(s-1,Number(s)+2).show().css("opacity","1.0"))})),$("#nav a.lastPage").bind("click",(function(){$("#nav a.normalLink").removeClass("active"),$("#nav a.lastPage").removeClass("active"),$("#nav a.nextPage").removeClass("active"),s-1>=0?$(this).attr("rel",s-1):$(this).attr("rel",0);var a=$(this).attr("rel");s=$(this).attr("rel");var e=5*a,t=e+5;$("#table-demo tbody tr").css("opacity","0.0").hide().slice(e,t).css("display","table-row").animate({opacity:1},300);for(var n=0;n<i;n++)n==Number(s)?$("#nav .pagination li.normal-page-item a.link"+String(n)).addClass("active"):$("#nav .pagination li.normal-page-item a.link"+String(n)).removeClass("active");i>=3&&(Number(s)-1<=0&&$("#nav .pagination li.normal-page-item").css("opacity","0.0").hide().slice(s,s+3).show().css("opacity","1.0"),Number(s)==i-1&&$("#nav .pagination li.normal-page-item").css("opacity","0.0").hide().slice(s-2,Number(s)+1).show().css("opacity","1.0"),Number(s)-1>=0&Number(s)!=i-1&&$("#nav .pagination li.normal-page-item").css("opacity","0.0").hide().slice(s-1,Number(s)+2).show().css("opacity","1.0"))})),$("#nav a.nextPage").bind("click",(function(){$("#nav a.normalLink").removeClass("active"),$("#nav a.lastPage").removeClass("active"),$("#nav a.nextPage").removeClass("active"),$(this).addClass("active"),Number(s)+1<i?$(this).attr("rel",Number(s)+1):$(this).attr("rel",s);var a=$(this).attr("rel");s=$(this).attr("rel");var e=5*a,t=e+5;$("#table-demo tbody tr").css("opacity","0.0").hide().slice(e,t).css("display","table-row").animate({opacity:1},300);for(var n=0;n<i;n++)n==Number(s)?$("#nav .pagination li.normal-page-item a.link"+String(n)).addClass("active"):$("#nav .pagination li.normal-page-item a.link"+String(n)).removeClass("active");$("#nav a.nextPage").removeClass("active"),i>=3&&(Number(s)+1==i&&$("#nav .pagination li.normal-page-item").css("opacity","0.0").hide().slice(s-2,s+1).show().css("opacity","1.0"),Number(s)+1<i&&$("#nav .pagination li.normal-page-item").css("opacity","0.0").hide().slice(s-1,Number(s)+2).show().css("opacity","1.0"))}))}}));