import{initializeApp}from"https://www.gstatic.com/firebasejs/9.8.3/firebase-app.js";import{getAnalytics}from"https://www.gstatic.com/firebasejs/9.8.3/firebase-analytics.js";import{delCookie,getCookie}from"./common_function.js";const firebaseConfig={apiKey:"AIzaSyDtTxfCIJIfPTEw44Ah5I1lpjiDO96FlJM",authDomain:"mydatabase-8f225.firebaseapp.com",databaseURL:"https://mydatabase-8f225-default-rtdb.firebaseio.com",projectId:"mydatabase-8f225",storageBucket:"mydatabase-8f225.appspot.com",messagingSenderId:"68532714578",appId:"1:68532714578:web:fc038b336827906b65338b",measurementId:"G-68RXLWEXS7"};firebase.initializeApp(firebaseConfig);var db=firebase.database();null==getCookie("identityNumber")&&(alert("請先登入再前往本頁面!"),window.location="Government_login.html"),null!=getCookie("uid")&&delCookie("uid");var data,logout_btn=document.querySelector(".logout_btn");logout_btn.addEventListener("click",(a=>{null!=getCookie("identityNumber")&&(delCookie("identityNumber"),document.cookie="LoginStatus=No",window.location="Government_login.html")}));var customer_row,customer_detail,users_id=[],count=1,customer_table_tbody=document.querySelector("tbody.customer-table-tbody");function generateCustomerRow(a,e,t){customer_row='<tr>\n                        <td class="customer_number">'+Number(e)+'</td>\n                        <td class="customer_name">'+a.realName+'</td>\n                        <td class="customer_gender">'+a.gender+'</td>\n                        <td class="customer_birth">'+a.birthDate+'</td>\n                        <td class="customer_detail"><a href="#" id="user_info_'+t+'" class="user_info">點擊查看</a></td>\n                    </tr>',customer_table_tbody.innerHTML+=customer_row,(e=users_id.length)&&((customer_detail=document.querySelectorAll(".user_info")).forEach((a=>{a.addEventListener("click",(a=>{null!=getCookie("uid")&&delCookie("uid"),document.cookie="uid="+String(a.target.id).substring(10),window.location="insuranceCompany_UserProfile.html"}))})),$(".loader-wrapper").fadeOut("slow"))}db.ref("/Government/restrictedUsers").once("value",(function(a){(data=a.val()).forEach((a=>{users_id.push(a)})),users_id.forEach((a=>{db.ref("/Users/"+String(a)).once("value",(function(e){generateCustomerRow(data=e.val(),count,a),count+=1}))}));var e,t=0,i=users_id.length;i%5==0&&(e=Math.round(i/5)),i%5!=0&&(e=Math.ceil(i/5)),$("#table-demo").after('<div id="nav"><ul class="pagination"></ul></div>');for(var s=0;s<e;s++){var o=s+1;$("#nav .pagination").append('<li class="page-item normal-page-item"><a class="page-link normalLink link'+s+'" rel="'+s+'">'+o+"</a></li>")}$("#nav .pagination").prepend('<li class="page-item special-page-item"><a class="page-link lastPage" rel="0" aria-label="Previous"><span aria-hidden="true">&laquo;</span><span class="sr-only">Previous</span></a></li>'),$("#nav .pagination").append('<li class="page-item special-page-item"><a class="page-link nextPage" aria-label="Next"><span aria-hidden="true">&raquo;</span><span class="sr-only">Next</span></a></li>'),$("#table-demo tbody tr").hide(),$("#table-demo tbody tr").slice(0,5).show(),$("#nav a.normalLink:first").addClass("active"),Number(t)-1<=0&&$("#nav .pagination li.normal-page-item").css("opacity","0.0").hide().slice(t,t+3).show().css("opacity","1.0"),$("#nav a.normalLink").bind("click",(function(){$("#nav a").removeClass("active"),$(this).addClass("active");var a=$(this).attr("rel");t=$(this).attr("rel");var i=5*a,s=i+5;$("#table-demo tbody tr").css("opacity","0.0").hide().slice(i,s).css("display","table-row").animate({opacity:1},300),e>=3&&(Number(t)-1<=0&&$("#nav .pagination li.normal-page-item").css("opacity","0.0").hide().slice(t,t+3).show().css("opacity","1.0"),Number(t)==e-1&&$("#nav .pagination li.normal-page-item").css("opacity","0.0").hide().slice(t-2,Number(t)+1).show().css("opacity","1.0"),Number(t)-1>=0&Number(t)!=e-1&&$("#nav .pagination li.normal-page-item").css("opacity","0.0").hide().slice(t-1,Number(t)+2).show().css("opacity","1.0"))})),$("#nav a.lastPage").bind("click",(function(){$("#nav a.normalLink").removeClass("active"),$("#nav a.lastPage").removeClass("active"),$("#nav a.nextPage").removeClass("active"),t-1>=0?$(this).attr("rel",t-1):$(this).attr("rel",0);var a=$(this).attr("rel");t=$(this).attr("rel");var i=5*a,s=i+5;$("#table-demo tbody tr").css("opacity","0.0").hide().slice(i,s).css("display","table-row").animate({opacity:1},300);for(var o=0;o<e;o++)o==Number(t)?$("#nav .pagination li.normal-page-item a.link"+String(o)).addClass("active"):$("#nav .pagination li.normal-page-item a.link"+String(o)).removeClass("active");e>=3&&(Number(t)-1<=0&&$("#nav .pagination li.normal-page-item").css("opacity","0.0").hide().slice(t,t+3).show().css("opacity","1.0"),Number(t)==e-1&&$("#nav .pagination li.normal-page-item").css("opacity","0.0").hide().slice(t-2,Number(t)+1).show().css("opacity","1.0"),Number(t)-1>=0&Number(t)!=e-1&&$("#nav .pagination li.normal-page-item").css("opacity","0.0").hide().slice(t-1,Number(t)+2).show().css("opacity","1.0"))})),$("#nav a.nextPage").bind("click",(function(){$("#nav a.normalLink").removeClass("active"),$("#nav a.lastPage").removeClass("active"),$("#nav a.nextPage").removeClass("active"),$(this).addClass("active"),Number(t)+1<e?$(this).attr("rel",Number(t)+1):$(this).attr("rel",t);var a=$(this).attr("rel");t=$(this).attr("rel");var i=5*a,s=i+5;$("#table-demo tbody tr").css("opacity","0.0").hide().slice(i,s).css("display","table-row").animate({opacity:1},300);for(var o=0;o<e;o++)o==Number(t)?$("#nav .pagination li.normal-page-item a.link"+String(o)).addClass("active"):$("#nav .pagination li.normal-page-item a.link"+String(o)).removeClass("active");$("#nav a.nextPage").removeClass("active"),e>=3&&(Number(t)+1==e&&$("#nav .pagination li.normal-page-item").css("opacity","0.0").hide().slice(t-2,t+1).show().css("opacity","1.0"),Number(t)+1<e&&$("#nav .pagination li.normal-page-item").css("opacity","0.0").hide().slice(t-1,Number(t)+2).show().css("opacity","1.0"))}))}));